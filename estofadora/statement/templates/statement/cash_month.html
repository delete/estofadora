{% extends "base.html" %}	

{% block content %}
<div class="panel panel-default">
	<div class="panel-body">
	        <h3>
        	<p class="text-center">Caixa mensal</p>
        	<p class="text-center">
        		<small>Listagem de receitas e despesas mensais.</small>
        	</p>
        </h3>
	</div>
</div>

<div class="well well-sm">
	<form method="POST" role="form">
        {% csrf_token %}
        <div class="form-inline">
        	<select name="selectmonth" class="form-control">
        		{% for number, name in months %}
	        		<option value="{{number}}"
	        			{% if number == choose_date|date:'m' %}selected{% endif %}>
						{{name}}
					</option>
        		{% endfor %}
			</select>
        	<select name="selectyear" class="form-control">
        		{% for year in years %}
					<option value="{{year}}"
						{% if year == choose_date.year %}selected{% endif %}>
						{{year}}
					</option> 
        		{% endfor %}
			</select>
            <span>
                <button class="btn btn-default form-control" type="submit" name="search_form" id="search-btn">Listar</button>
            </span>
        </div>
    </form>
</div>

{% if content %}

	<table class="table table-striped">
	    <thead>
	        <tr>
	            <th>Data</th>
	            <th>Hist√≥rico</th>
	            <th>Entrada</th>
	            <th>Saida</th>	            
	        </tr>
	    </thead>
	    <tbody>
	        {% for item in content %}
	            <tr>
	                <td>{{item.date}}</td>
	                <td>{{item.history}}</td>
	                <td>{{item.income}}</td>
	                <td>{{item.expenses }}</td>
	            </tr>
	        {% endfor %}
	    </tbody>
	</table>

	<div class="total_value">
		{% if total_value > 0 %}
		<p class="text-right text-success">
		{% else %}
		<p class="text-right text-danger">
		{% endif %}
			Valor total: R$ {{ total_value }}
		</p>
	</div>

{% else %}
	<div class="alert alert-warning" role="alert">
		<p class="text-center">
			Nenhum registro encontrado em: {{ choose_date|date:'F Y' }}!
		</p>
		
	</div>
{% endif %}

{% endblock %}